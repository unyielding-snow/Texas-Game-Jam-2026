pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
fade = 1  -- start fully black
fading = true

function _update()
 if fading then
  fade -= 0.02        -- decrease slowly
		print("fading")
  if fade <= 0 then
   fade = 0
   fading = false
  end
 end
end

function _draw()
 cls(3)               -- scene background
 map(0,0,0,0,16,16)   -- draw tilemap

 -- overlay
 if fade > 0 then
  fade_overlay(fade)
 end
end

function fade_overlay(level)
 -- pick dithering based on fade level
 local patterns = {
  0b1111111111111111, -- 100% black
  0b1110111011101110, -- 75%
  0b0101010101010101, -- 50%
  0b0001000100010001, -- 25%
  0b0000000000000000  -- 0% (none)
 }
 local i = min(5, flr(level*4)+1)
 fillp(patterns[i])
 rectfill(0,0,127,127,0)
 fillp()
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000009000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000009000999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000090000090900000000099999990000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000090000009099000009900000009999990000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000990000009000999990000000000000009900000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000900000000909999999000000000000000099000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000099999999999999990099900000000000000000990000000000000000000000000000000000000000000000000000000000000000000
00000000000000000999909000009900090999999990000000000000000009000000000000000000000000000000000000000000000000000000000000000000
00000000000000009000009000990000099000009999000000000000000000900000000000000000000000000000000000000000000000000000000000000000
00000000000000990000090009000000099000090009990000000000000000090000000000000000000000000000000000000000000000000000000000000000
00000000000009000000090090000000909000900000099900000000000000009000000000000000000000000000000000000000000000000000000000000000
00000000000090000000900900000009000909000000000999900000000000000900000000000000000000000000000000000000000000000000000000000000
00000000000900000000909000000090000990000000000009090099000000000900000000000000000000000000000000000000000000000000000000000000
00000000009000000000990000000090000990000000000000999990000000000900000000000000000000000000000000000000000000000000000000000000
00000000090000000009900000000900099090000000000000009900000000000900000000000000000000000000000000000000000000000000000000000000
00000000900000000009900000000909900009000000099999999990000000000900000000000000000000000000000000000000000000000000000000000000
00000000000000000009000000099999999990900999900000999009900000000900000000000000000000000000000000000000000000000000000000000000
00000000000000000090009999999000000009999000000009909000099000000900000000000000000000000000000000000000000000000000000000000000
00000000999999999999999900090000000990990000000099090000009900000900000000000000000000000000000000000000000000000000000000000000
00000000000000000990090000090000099000909000009909900000009090000900000000000000000000000000000000000000000000000000000000000000
00000000000000000990090000900009900000900900990099000000009009900900000000000000000000000000000000000000000000000000000000000000
00000000000000009009090000900990000000900999000990000000009000099000000000000000000000000000000000000000000000000000000000000000
00000000000000009009009000909000000009000900009900000000009000009000000000000000000000000000000000000000000000000000000000000000
00000000000000090000909000990000000009999999990000000000009000090900000000000000000000000000000000000000000000000000000000000000
00000000000000090000090909900000000999999090090000000000090000900090000000000000000000000000000000000000000000000000000000000000
00000000000000900000009990099999999990000090900000000000090009000009000000000000000000000000000000000000000000000000000000000000
00000000000000900000009999099999990000000099000000000000900090000000900000000000000000000000000000000000000000000000000000000000
00000000000000900000009099999009900000000090000000000009099900000000099000000000000000000000000000000000000000000000000000000000
00000000000000900000999900900999900000000990000000000009900000000000000900000000000000000000000000000000000000000000000000000000
00000000000009000009009999999900099999009090000000000999000000000000000000000000000000000000000000000000000000000000000000000000
00000000000009000009000009990999999999999999999999999900000000000000000000000000000000000000000000000000000000000000000000000000
00000000000009000090009990000099000000090099999990090000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000009000999990000000000900000900900000000090000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000009000000000000000000090009000900000000900000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000009000000000000000000009090009000000009000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000009000000000000000000000990090000000990000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000900000000000000000009009990000009000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000900000000000000000090000999000990000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000900000000000000000900009009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000090000000000000099000090009900000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000009000000000000900000900999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000900000000009000099999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000099000000090000999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000999999999999999000000000000000000000000000000099999900000000000000000000000000000000000000000000000000000000
00000000000000000000000009000999999999999999999999999999999999999900000000000000000000000000000000000000000000000000000000000000
00000000000000000000000990999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000009900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0102030405060708000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1112131415161718000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2122232425262728000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132333435363738000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4142434445464748000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5152535455565758000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6162636465666768000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7172737475767778000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
